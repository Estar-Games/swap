import{c as y,d as x}from"./chunk-5WWDE5CH.js";import{c as d}from"./chunk-7VRNE5H2.js";import{e as f}from"./chunk-EU6LW3Z6.js";import{a as u}from"./chunk-6O6BU23Y.js";import{b as m}from"./chunk-7YJZIEAA.js";import{a as L}from"./chunk-N5CEAHUR.js";import{a as c,e as l,g as p}from"./chunk-YMWLFVZR.js";p();import{useState as I}from"react";import{ExtensionProvider as k}from"@elrondnetwork/erdjs-extension-provider";var q=({callbackRoute:t,token:n,redirectAfterLogin:T=!1})=>{let[r,E]=I(""),[S,s]=I(!1),w=x(d),g=y();function h(){return l(this,null,function*(){s(!0);let o=k.getInstance();try{if(!(yield o.init())){console.warn("Something went wrong trying to redirect to wallet login..");return}let U=encodeURIComponent(`${window.location.origin}${t}`),v=c({callbackUrl:U},n&&{token:n});yield o.login(v),L(o);let{signature:a,address:P}=o.account;a&&g(f({loginToken:String(n),signature:a})),g(m({address:P,loginMethod:"extension"})),u(t,T)}catch(e){console.error("error loging in",e),E("error logging in"+e.message)}finally{s(!1)}})}let i=Boolean(r);return[h,{loginFailed:i,error:r,isLoading:S&&!i,isLoggedIn:w&&!i}]};export{q as a};
//# sourceMappingURL=chunk-E5MPXD72.js.map
