import{c as x,d as c}from"./chunk-5WWDE5CH.js";import{a as R}from"./chunk-NPX3K3L4.js";import{G as M,q as I}from"./chunk-CIYEPAMQ.js";import{c as i,e as b}from"./chunk-TRR6AJCY.js";import{b as w}from"./chunk-LJMA6SHE.js";import{c as h}from"./chunk-AXKBBYAP.js";import{b as y}from"./chunk-SEXJSOIC.js";import{a as l,b as p,e as T,g}from"./chunk-YMWLFVZR.js";g();import H,{useRef as N}from"react";import{Address as U}from"@elrondnetwork/erdjs";import{Signature as W}from"@elrondnetwork/erdjs/out/signature";var q=({sendSignedTransactionsAsync:A=R})=>{let d=c(h),n=c(M),e=N(!1),o=x(),u=()=>{o(b()),e.current=!1};function E(){return T(this,null,function*(){var m,S;let P=Object.keys(n);for(let s of P){let j=(S=(m=n==null?void 0:n[s])==null?void 0:m.customTransactionInformation)==null?void 0:S.signWithoutSending;if(!(!s||j))try{if(!(n[s].status==="signed"&&!e.current))continue;let{transactions:r}=n[s];if(!r)continue;e.current=!0;let k=r.map(t=>{let B=new U(t.sender),f=y(t),D=new W(t.signature);return f.applySignature(D,B),f}),C=yield A(k),O="pending",v=r.map(t=>C.includes(t.hash)?p(l({},t),{status:O}):t);o(w({sessionId:s,submittedMessage:"submitted"})),o(i({sessionId:s,status:"sent",transactions:v})),u(),I(d.nonce+r.length),history.pushState({},document.title,"?")}catch(a){console.error("Unable to send transactions",a),o(i({sessionId:s,status:"fail",errorMessage:a.message})),u()}finally{e.current=!1}}})}return H.useEffect(()=>{E()},[n,d]),null},an=q;export{q as a,an as b};
//# sourceMappingURL=chunk-CMSAVUPV.js.map
