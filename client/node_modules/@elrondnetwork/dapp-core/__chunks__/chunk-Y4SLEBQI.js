import{b as d}from"./chunk-X3XWFXC5.js";import{a as T}from"./chunk-LR4373CI.js";import{b as o}from"./chunk-JAGHGL47.js";import{a as l}from"./chunk-UC2YA35M.js";import{g as S}from"./chunk-YMWLFVZR.js";S();import n from"react";import b from"moment";var W=({id:a,children:f,progress:r,done:g,expiresIn:v=10*60})=>{let u=n.useRef(null),m=n.useRef(),R=()=>{let e=o.session.getItem("toastProgress");if(!Boolean(e==null?void 0:e[a]))return;let i=l(v);delete e[a],o.session.setItem({key:"toastProgress",data:e,expires:i})},P=({value:e})=>{let t=o.session.getItem("toastProgress")||{};t[a]=e,o.session.setItem({key:"toastProgress",data:t,expires:l(v)})},h=()=>{let e=r?r.endTime-r.startTime:0,t=o.session.getItem("toastProgress"),i=r?(r.endTime-b().unix())*100/e:0;return{currentRemaining:t&&a in t?t[a]:i,totalSeconds:e}},{totalSeconds:y,currentRemaining:N}=h(),[x,p]=n.useState(N);return n.useEffect(()=>{if(r){let t=y/90,i=b.duration(t.toFixed(2),"s").asMilliseconds();return g?m.current=setInterval(()=>{u.current!==null&&p(s=>{let c=s-1;return c<=0?(clearInterval(m.current),R(),0):(P({value:c}),c)})},5):m.current=setInterval(()=>{u.current!==null&&p(s=>{let c=s>10?1:T(s),I=s-c;return P({value:I}),I})},i),()=>{clearInterval(m.current)}}},[r,g]),r?n.createElement("div",{ref:u,className:d.progress},n.createElement("div",{role:"progressbar",style:{width:`${x}%`},"aria-valuenow":x,"aria-valuemin":0,"aria-valuemax":100,className:d.bar}),f):n.createElement(n.Fragment,null,f)};export{W as a};
//# sourceMappingURL=chunk-Y4SLEBQI.js.map
