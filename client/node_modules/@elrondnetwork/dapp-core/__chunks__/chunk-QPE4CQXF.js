import{c as u,d as t}from"./chunk-5WWDE5CH.js";import{c as p}from"./chunk-7VRNE5H2.js";import{e as g}from"./chunk-W6LR3W2N.js";import{g as L}from"./chunk-EU6LW3Z6.js";import{c as d}from"./chunk-MDPKQI3Z.js";import{a as s,e as l,g as c}from"./chunk-YMWLFVZR.js";c();import{useState as m}from"react";var x=({callbackRoute:y,token:n})=>{let[i,f]=m(""),[W,r]=m(!1),w=t(p),b=t(g),T=u();function k(){return l(this,null,function*(){try{r(!0);let e=d(b.walletAddress),a=new Date,I=a.setMinutes(a.getMinutes()+3)/1e3;T(L({data:{},expires:I}));let U=encodeURIComponent(`${window.location.origin}${y}`),S=s({callbackUrl:U},n&&{token:n});yield e.login(S)}catch(e){console.error(e),f("error logging in"+e.message)}finally{r(!1)}})}let o=Boolean(i);return[k,{error:i,loginFailed:o,isLoading:W&&!o,isLoggedIn:w&&!o}]},$=x;export{x as a,$ as b};
//# sourceMappingURL=chunk-QPE4CQXF.js.map
