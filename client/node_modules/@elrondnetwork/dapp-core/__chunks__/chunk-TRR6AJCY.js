import{i as f,j as I}from"./chunk-IJ6N7P6P.js";import{a as A}from"./chunk-7YJZIEAA.js";import{a as u,b as y,g as m}from"./chunk-YMWLFVZR.js";m();import{createSlice as v}from"@reduxjs/toolkit";import{REHYDRATE as F}from"redux-persist";var g={signedTransactions:{},transactionsToSign:null,signTransactionsError:null,customTransactionInformationForSessionId:{}},M={signWithoutSending:!1,sessionInformation:null,redirectAfterSign:!1},E=v({name:"transactionsSlice",initialState:g,reducers:{moveTransactionsToSignedState:(n,a)=>{var e,c;let{sessionId:s,transactions:o,errorMessage:i,status:t}=a.payload,r=((e=n.customTransactionInformationForSessionId)==null?void 0:e[s])||M;n.signedTransactions[s]={transactions:o,status:t,errorMessage:i,customTransactionInformation:r},((c=n==null?void 0:n.transactionsToSign)==null?void 0:c.sessionId)===s&&(n.transactionsToSign=g.transactionsToSign)},clearSignedTransaction:(n,a)=>{n.signedTransactions[a.payload]&&delete n.signedTransactions[a.payload]},clearTransactionToSign:n=>{n!=null&&n.transactionsToSign&&(n.transactionsToSign=null)},updateSignedTransaction:(n,a)=>{n.signedTransactions=u(u({},n.signedTransactions),a.payload)},updateSignedTransactions:(n,a)=>{let{sessionId:s,status:o,errorMessage:i,transactions:t}=a.payload;n.signedTransactions[s]!=null&&(n.signedTransactions[s].status=o,i!=null&&(n.signedTransactions[s].errorMessage=i),t!=null&&(n.signedTransactions[s].transactions=t))},updateSignedTransactionStatus:(n,a)=>{var e,c,l,S,d,p;let{sessionId:s,status:o,errorMessage:i,transactionHash:t}=a.payload,r=(c=(e=n.signedTransactions)==null?void 0:e[s])==null?void 0:c.transactions;if(r!=null){n.signedTransactions[s].transactions=r.map(T=>T.hash===t?y(u({},T),{status:o,errorMessage:i}):T);let P=(S=(l=n.signedTransactions[s])==null?void 0:l.transactions)==null?void 0:S.every(T=>f(T.status)),x=(p=(d=n.signedTransactions[s])==null?void 0:d.transactions)==null?void 0:p.every(T=>I(T.status));P&&(n.signedTransactions[s].status="success"),x&&(n.signedTransactions[s].status="fail")}},setTransactionsToSign:(n,a)=>{n.transactionsToSign=a.payload;let{sessionId:s,customTransactionInformation:o}=a.payload;n.customTransactionInformationForSessionId[s]=o,n.signTransactionsError=null},clearAllTransactionsToSign:n=>{n.transactionsToSign=g.transactionsToSign,n.signTransactionsError=null},clearAllSignedTransactions:n=>{n.signedTransactions=g.signedTransactions},setSignTransactionsError:(n,a)=>{n.signTransactionsError=a.payload}},extraReducers:n=>{n.addCase(A,()=>g),n.addCase(F,(a,s)=>{var r;if(!((r=s.payload)!=null&&r.transactions))return;let{signedTransactions:o,customTransactionInformationForSessionId:i}=s.payload.transactions,t=Object.entries(o).reduce((e,[c,l])=>{let S=new Date(c),d=new Date;return d.setHours(d.getHours()+5),d-S>0||(e[c]=l),e},{});i!=null&&(a.customTransactionInformationForSessionId=i),o!=null&&(a.signedTransactions=t)})}}),{updateSignedTransactionStatus:W,updateSignedTransactions:Y,setTransactionsToSign:b,clearAllTransactionsToSign:q,clearAllSignedTransactions:z,clearSignedTransaction:G,clearTransactionToSign:J,setSignTransactionsError:K,moveTransactionsToSignedState:L}=E.actions,N=E.reducer;export{E as a,W as b,Y as c,b as d,q as e,z as f,G as g,J as h,K as i,L as j,N as k};
//# sourceMappingURL=chunk-TRR6AJCY.js.map
