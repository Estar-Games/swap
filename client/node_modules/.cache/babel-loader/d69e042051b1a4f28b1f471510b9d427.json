{"ast":null,"code":"import { a as B } from \"./chunk-LTUYRPJ2.js\";\nimport { a as V } from \"./chunk-7JG4YRLS.js\";\nimport { c as z, d as I } from \"./chunk-5WWDE5CH.js\";\nimport { M as j, p as L, r as D } from \"./chunk-CIYEPAMQ.js\";\nimport { a as x } from \"./chunk-SORSKVNN.js\";\nimport { a as U } from \"./chunk-5MX63NMQ.js\";\nimport { h as G } from \"./chunk-2BJAJJPS.js\";\nimport { e as O, j as m } from \"./chunk-TRR6AJCY.js\";\nimport { b as M } from \"./chunk-FVNTWDXO.js\";\nimport { b as w } from \"./chunk-AXKBBYAP.js\";\nimport { b as W } from \"./chunk-MDPKQI3Z.js\";\nimport { j as k } from \"./chunk-OZ6SMI6T.js\";\nimport { a as y, b as P, c as v, d as C, e as _ } from \"./chunk-SWLQGVF6.js\";\nimport { e as p, g as N } from \"./chunk-YMWLFVZR.js\";\nN();\nimport { useEffect as Q, useRef as Y, useState as nn } from \"react\";\nimport { ExtensionProvider as $ } from \"@elrondnetwork/erdjs-extension-provider\";\n\nvar tn = (i, d) => d.map((g, a) => (g.setNonce(i + a), g)),\n    sn = () => {\n  let i = z(),\n      d = Y(\"/\"),\n      g = I(w),\n      {\n    provider: a\n  } = V(),\n      h = W(a),\n      [F, E] = nn(null),\n      o = I(j),\n      X = Boolean(o == null ? void 0 : o.transactions),\n      A = n => {\n    E(null), R(n);\n  };\n\n  B(A);\n\n  function R(n) {\n    var r, s;\n    let e = a instanceof $;\n    i(O()), i(G(n)), e && ((s = (r = $.getInstance()) == null ? void 0 : r.cancelAction) == null || s.call(r));\n  }\n\n  let f = (n, e) => {\n    let r = n !== P;\n    R(e), r && E(n);\n  },\n      Z = function (n, e) {\n    let r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"\";\n    let s = {\n      [k]: e\n    },\n        l = `${window.location.origin}${r}`,\n        c = U({\n      callbackUrl: l,\n      urlParams: s\n    });\n    a.signTransactions(n, {\n      callbackUrl: encodeURIComponent(c)\n    });\n  },\n      q = () => p(void 0, null, function* () {\n    var b;\n    let {\n      sessionId: n,\n      transactions: e,\n      callbackRoute: r,\n      customTransactionInformation: s\n    } = o,\n        {\n      redirectAfterSign: l\n    } = s,\n        c = r || window.location.pathname,\n        T = window.location.pathname.includes(c),\n        S = l && !T;\n\n    try {\n      if (!(yield (b = a == null ? void 0 : a.init) == null ? void 0 : b.call(a))) return;\n    } catch (t) {\n      let u = (t == null ? void 0 : t.message) || t || C;\n      f(u);\n      return;\n    }\n\n    try {\n      let t = yield a.signTransactions(e),\n          u = Object.keys(t).length === e.length;\n      if (!(t && t && u)) return;\n      let J = Object.values(t).map(K => x(K));\n      i(m({\n        sessionId: n,\n        transactions: J,\n        status: \"signed\"\n      })), S && M(c);\n    } catch (t) {\n      let u = (t == null ? void 0 : t.message) || t || v;\n      i(m({\n        sessionId: n,\n        status: \"cancelled\"\n      })), f(u, n);\n    }\n  }),\n      H = () => p(void 0, null, function* () {\n    if (!o) return;\n    let {\n      sessionId: n,\n      transactions: e,\n      callbackRoute: r\n    } = o;\n\n    if (!a) {\n      console.error(_);\n      return;\n    }\n\n    d.current = r || window.location.pathname;\n\n    try {\n      let s = yield L(g);\n      if (s == null) return;\n      let l = h === \"wallet\",\n          c = ![\"wallet\", \"ledger\"].includes(h),\n          T = D(s),\n          S = tn(T, e);\n      l && Z(S, n, r), c && q();\n    } catch (s) {\n      let c = (s == null ? void 0 : s.message) || y;\n      f(c, n), i(m({\n        sessionId: n,\n        status: \"cancelled\"\n      })), console.error(c, s);\n    }\n  });\n\n  return Q(() => {\n    H();\n  }, [o]), {\n    error: F,\n    onAbort: A,\n    hasTransactions: X,\n    callbackRoute: d.current,\n    sessionId: o == null ? void 0 : o.sessionId,\n    transactions: o == null ? void 0 : o.transactions\n  };\n},\n    bn = sn;\n\nexport { sn as a, bn as b };","map":{"version":3,"names":["a","B","V","c","z","d","I","M","j","p","L","r","D","x","U","h","G","e","O","m","b","w","W","k","y","P","v","C","_","g","N","useEffect","Q","useRef","Y","useState","nn","ExtensionProvider","$","tn","i","map","setNonce","sn","provider","F","E","o","X","Boolean","transactions","A","n","R","s","getInstance","cancelAction","call","f","Z","l","window","location","origin","callbackUrl","urlParams","signTransactions","encodeURIComponent","q","sessionId","callbackRoute","customTransactionInformation","redirectAfterSign","pathname","T","includes","S","init","t","u","message","Object","keys","length","J","values","K","status","H","console","error","current","onAbort","hasTransactions","bn"],"sources":["/home/edi/Desktop/swap/client/node_modules/@elrondnetwork/dapp-core/__chunks__/chunk-COXTTDSK.js"],"sourcesContent":["import{a as B}from\"./chunk-LTUYRPJ2.js\";import{a as V}from\"./chunk-7JG4YRLS.js\";import{c as z,d as I}from\"./chunk-5WWDE5CH.js\";import{M as j,p as L,r as D}from\"./chunk-CIYEPAMQ.js\";import{a as x}from\"./chunk-SORSKVNN.js\";import{a as U}from\"./chunk-5MX63NMQ.js\";import{h as G}from\"./chunk-2BJAJJPS.js\";import{e as O,j as m}from\"./chunk-TRR6AJCY.js\";import{b as M}from\"./chunk-FVNTWDXO.js\";import{b as w}from\"./chunk-AXKBBYAP.js\";import{b as W}from\"./chunk-MDPKQI3Z.js\";import{j as k}from\"./chunk-OZ6SMI6T.js\";import{a as y,b as P,c as v,d as C,e as _}from\"./chunk-SWLQGVF6.js\";import{e as p,g as N}from\"./chunk-YMWLFVZR.js\";N();import{useEffect as Q,useRef as Y,useState as nn}from\"react\";import{ExtensionProvider as $}from\"@elrondnetwork/erdjs-extension-provider\";var tn=(i,d)=>d.map((g,a)=>(g.setNonce(i+a),g)),sn=()=>{let i=z(),d=Y(\"/\"),g=I(w),{provider:a}=V(),h=W(a),[F,E]=nn(null),o=I(j),X=Boolean(o==null?void 0:o.transactions),A=n=>{E(null),R(n)};B(A);function R(n){var r,s;let e=a instanceof $;i(O()),i(G(n)),e&&((s=(r=$.getInstance())==null?void 0:r.cancelAction)==null||s.call(r))}let f=(n,e)=>{let r=n!==P;R(e),r&&E(n)},Z=(n,e,r=\"\")=>{let s={[k]:e},l=`${window.location.origin}${r}`,c=U({callbackUrl:l,urlParams:s});a.signTransactions(n,{callbackUrl:encodeURIComponent(c)})},q=()=>p(void 0,null,function*(){var b;let{sessionId:n,transactions:e,callbackRoute:r,customTransactionInformation:s}=o,{redirectAfterSign:l}=s,c=r||window.location.pathname,T=window.location.pathname.includes(c),S=l&&!T;try{if(!(yield(b=a==null?void 0:a.init)==null?void 0:b.call(a)))return}catch(t){let u=(t==null?void 0:t.message)||t||C;f(u);return}try{let t=yield a.signTransactions(e),u=Object.keys(t).length===e.length;if(!(t&&(t&&u)))return;let J=Object.values(t).map(K=>x(K));i(m({sessionId:n,transactions:J,status:\"signed\"})),S&&M(c)}catch(t){let u=(t==null?void 0:t.message)||t||v;i(m({sessionId:n,status:\"cancelled\"})),f(u,n)}}),H=()=>p(void 0,null,function*(){if(!o)return;let{sessionId:n,transactions:e,callbackRoute:r}=o;if(!a){console.error(_);return}d.current=r||window.location.pathname;try{let s=yield L(g);if(s==null)return;let l=h===\"wallet\",c=![\"wallet\",\"ledger\"].includes(h),T=D(s),S=tn(T,e);l&&Z(S,n,r),c&&q()}catch(s){let c=(s==null?void 0:s.message)||y;f(c,n),i(m({sessionId:n,status:\"cancelled\"})),console.error(c,s)}});return Q(()=>{H()},[o]),{error:F,onAbort:A,hasTransactions:X,callbackRoute:d.current,sessionId:o==null?void 0:o.sessionId,transactions:o==null?void 0:o.transactions}},bn=sn;export{sn as a,bn as b};\n//# sourceMappingURL=chunk-COXTTDSK.js.map\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}