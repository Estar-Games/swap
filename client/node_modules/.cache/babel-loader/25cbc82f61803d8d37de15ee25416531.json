{"ast":null,"code":"import { a as E } from \"./chunk-BOARPJT6.js\";\nimport { a as w } from \"./chunk-IKL5RLRZ.js\";\nimport { a as k } from \"./chunk-XJJEEDNX.js\";\nimport { a as P } from \"./chunk-YTL3XDSH.js\";\nimport { a as F } from \"./chunk-CQECN6DM.js\";\nimport { a as c, e as p, g as M } from \"./chunk-YMWLFVZR.js\";\nM();\nimport { useEffect as en, useState as g } from \"react\";\nvar l = {};\n\nfunction tn(_ref) {\n  let {\n    transactionsToSign: R,\n    egldLabel: C,\n    address: U,\n    verifyReceiverScam: W = !0,\n    onCancel: B,\n    onSignTransaction: N,\n    onTransactionsSignError: V,\n    onTransactionsSignSuccess: j\n  } = _ref;\n  var x, D, b;\n  let [r, o] = g(0),\n      [d, S] = g(),\n      [e, q] = g(null),\n      [O, f] = g(!1),\n      m = P(\"ledger\"),\n      {\n    getTxInfoByDataField: z,\n    allTransactions: s\n  } = E({\n    transactions: R\n  }),\n      T = r === s.length - 1;\n  en(() => {\n    G();\n  }, [r, s]);\n\n  function G() {\n    return p(this, null, function* () {\n      var A;\n      let n = s[r];\n      if (n == null) return;\n\n      let {\n        transaction: t,\n        multiTxData: i\n      } = n,\n          u = t.getData().toString(),\n          I = z(t.getData().toString(), i),\n          {\n        tokenId: h\n      } = I,\n          a = t.getReceiver().toString(),\n          _ = U !== a,\n          $ = (a in l);\n\n      if (_ && !$ && W) {\n        let L = yield w(a);\n        l = c(c({}, l), L.scamInfo ? {\n          [a]: L.scamInfo\n        } : {});\n      }\n\n      let nn = Boolean(h && k({\n        tokenId: h,\n        erdLabel: C\n      }));\n      q({\n        transaction: t,\n        receiverScamInfo: ((A = l[a]) == null ? void 0 : A.info) || null,\n        transactionTokenInfo: I,\n        isTokenTransaction: nn,\n        dataField: u\n      });\n    });\n  }\n\n  function v() {\n    o(0), S(void 0), f(!1);\n  }\n\n  function y() {\n    return p(this, null, function* () {\n      try {\n        if (e == null) return;\n        f(m);\n        let n = yield N(e.transaction),\n            t = {\n          [r]: n\n        },\n            i = d ? c(c({}, d), t) : t;\n        S(i), T ? i && (j(Object.values(i)), v()) : (o(u => u + 1), f(!1));\n      } catch (n) {\n        console.error(n, \"sign error\");\n        let {\n          message: t\n        } = n,\n            i = m ? F(n).errorMessage : null;\n        v(), V(i != null ? i : t);\n      }\n    });\n  }\n\n  function H() {\n    try {\n      if (e == null) return;\n      e.transaction.getSignature().hex() ? T || o(t => t + 1) : y();\n    } catch (n) {\n      y();\n    }\n  }\n\n  let J = r === 0;\n\n  function K() {\n    J ? B() : o(n => n - 1);\n  }\n\n  let Q = ((x = e == null ? void 0 : e.transactionTokenInfo) == null ? void 0 : x.type) && ((D = e == null ? void 0 : e.transactionTokenInfo) == null ? void 0 : D.multiTxData) && !(e != null && e.dataField.endsWith((b = e == null ? void 0 : e.transactionTokenInfo) == null ? void 0 : b.multiTxData));\n\n  function X() {\n    Q ? o(n => n + 1) : H();\n  }\n\n  function Y() {\n    o(n => {\n      let t = n + 1;\n      return t > (s == null ? void 0 : s.length) ? n : t;\n    });\n  }\n\n  function Z() {\n    o(n => {\n      let t = n - 1;\n      return t < 0 ? n : t;\n    });\n  }\n\n  return {\n    allTransactions: s,\n    onSignTransaction: X,\n    onNext: Y,\n    onPrev: Z,\n    waitingForDevice: O,\n    onAbort: K,\n    isLastTransaction: T,\n    currentStep: r,\n    signedTransactions: d,\n    currentTransaction: e\n  };\n}\n\nvar un = tn;\nexport { tn as a, un as b };","map":{"version":3,"names":["a","E","w","k","P","F","c","e","p","g","M","useEffect","en","useState","l","tn","transactionsToSign","R","egldLabel","C","address","U","verifyReceiverScam","W","onCancel","B","onSignTransaction","N","onTransactionsSignError","V","onTransactionsSignSuccess","j","x","D","b","r","o","d","S","q","O","f","m","getTxInfoByDataField","z","allTransactions","s","transactions","T","length","G","A","n","transaction","t","multiTxData","i","u","getData","toString","I","tokenId","h","getReceiver","_","$","L","scamInfo","nn","Boolean","erdLabel","receiverScamInfo","info","transactionTokenInfo","isTokenTransaction","dataField","v","y","Object","values","console","error","message","errorMessage","H","getSignature","hex","J","K","Q","type","endsWith","X","Y","Z","onNext","onPrev","waitingForDevice","onAbort","isLastTransaction","currentStep","signedTransactions","currentTransaction","un"],"sources":["/home/edi/Desktop/swap/client/node_modules/@elrondnetwork/dapp-core/__chunks__/chunk-URHKLTBY.js"],"sourcesContent":["import{a as E}from\"./chunk-BOARPJT6.js\";import{a as w}from\"./chunk-IKL5RLRZ.js\";import{a as k}from\"./chunk-XJJEEDNX.js\";import{a as P}from\"./chunk-YTL3XDSH.js\";import{a as F}from\"./chunk-CQECN6DM.js\";import{a as c,e as p,g as M}from\"./chunk-YMWLFVZR.js\";M();import{useEffect as en,useState as g}from\"react\";var l={};function tn({transactionsToSign:R,egldLabel:C,address:U,verifyReceiverScam:W=!0,onCancel:B,onSignTransaction:N,onTransactionsSignError:V,onTransactionsSignSuccess:j}){var x,D,b;let[r,o]=g(0),[d,S]=g(),[e,q]=g(null),[O,f]=g(!1),m=P(\"ledger\"),{getTxInfoByDataField:z,allTransactions:s}=E({transactions:R}),T=r===s.length-1;en(()=>{G()},[r,s]);function G(){return p(this,null,function*(){var A;let n=s[r];if(n==null)return;let{transaction:t,multiTxData:i}=n,u=t.getData().toString(),I=z(t.getData().toString(),i),{tokenId:h}=I,a=t.getReceiver().toString(),_=U!==a,$=a in l;if(_&&!$&&W){let L=yield w(a);l=c(c({},l),L.scamInfo?{[a]:L.scamInfo}:{})}let nn=Boolean(h&&k({tokenId:h,erdLabel:C}));q({transaction:t,receiverScamInfo:((A=l[a])==null?void 0:A.info)||null,transactionTokenInfo:I,isTokenTransaction:nn,dataField:u})})}function v(){o(0),S(void 0),f(!1)}function y(){return p(this,null,function*(){try{if(e==null)return;f(m);let n=yield N(e.transaction),t={[r]:n},i=d?c(c({},d),t):t;S(i),T?i&&(j(Object.values(i)),v()):(o(u=>u+1),f(!1))}catch(n){console.error(n,\"sign error\");let{message:t}=n,i=m?F(n).errorMessage:null;v(),V(i!=null?i:t)}})}function H(){try{if(e==null)return;e.transaction.getSignature().hex()?T||o(t=>t+1):y()}catch(n){y()}}let J=r===0;function K(){J?B():o(n=>n-1)}let Q=((x=e==null?void 0:e.transactionTokenInfo)==null?void 0:x.type)&&((D=e==null?void 0:e.transactionTokenInfo)==null?void 0:D.multiTxData)&&!(e!=null&&e.dataField.endsWith((b=e==null?void 0:e.transactionTokenInfo)==null?void 0:b.multiTxData));function X(){Q?o(n=>n+1):H()}function Y(){o(n=>{let t=n+1;return t>(s==null?void 0:s.length)?n:t})}function Z(){o(n=>{let t=n-1;return t<0?n:t})}return{allTransactions:s,onSignTransaction:X,onNext:Y,onPrev:Z,waitingForDevice:O,onAbort:K,isLastTransaction:T,currentStep:r,signedTransactions:d,currentTransaction:e}}var un=tn;export{tn as a,un as b};\n//# sourceMappingURL=chunk-URHKLTBY.js.map\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}