{"ast":null,"code":"import { a as h } from \"./chunk-EXNBNIH3.js\";\nimport { a as G } from \"./chunk-7JG4YRLS.js\";\nimport { c as E, d } from \"./chunk-5WWDE5CH.js\";\nimport { b as x } from \"./chunk-CIYEPAMQ.js\";\nimport { c as D } from \"./chunk-7VRNE5H2.js\";\nimport { c as b, d as A } from \"./chunk-W6LR3W2N.js\";\nimport { c as L, e as B, f as P } from \"./chunk-EU6LW3Z6.js\";\nimport { a as R } from \"./chunk-6O6BU23Y.js\";\nimport { b as H } from \"./chunk-7YJZIEAA.js\";\nimport { a as M } from \"./chunk-N5CEAHUR.js\";\nimport { e as s, g as S } from \"./chunk-YMWLFVZR.js\";\nS();\nimport { useEffect as Q, useRef as V, useState as $ } from \"react\";\nimport { WalletConnectProvider as X } from \"@elrondnetwork/erdjs-wallet-connect-provider\";\n\nvar Y = _ref => {\n  let {\n    callbackRoute: w,\n    logoutRoute: v,\n    token: l,\n    redirectAfterLogin: O = !1\n  } = _ref;\n  let a = E(),\n      z = 15e3,\n      [y, F] = $(\"\"),\n      [u, T] = $(\"\"),\n      {\n    provider: g\n  } = G(),\n      p = d(b),\n      J = d(A),\n      I = d(D),\n      n = V(g),\n      m,\n      W = Boolean(u),\n      N = !W,\n      j = W ? `${J}?wallet-connect=${encodeURIComponent(u)}` : null;\n  Q(() => {\n    k();\n    let e = setInterval(() => {\n      k();\n    }, z);\n    return () => clearInterval(e);\n  }, [g]), h(() => {\n    U();\n  }, [l]), h(() => {\n    n.current = g;\n  }, [g]);\n\n  let f = () => {\n    x(v);\n  };\n\n  function k() {\n    return s(this, null, function* () {\n      var o, t;\n      if (!Boolean((t = (o = n.current) == null ? void 0 : o.walletConnector) == null ? void 0 : t.connected)) return;\n      let i = {\n        method: \"heartbeat\",\n        params: {}\n      };\n\n      try {\n        yield n.current.sendCustomMessage(i);\n      } catch (r) {\n        console.error(\"Connection lost\", r), f();\n      }\n    });\n  }\n\n  function q() {\n    return s(this, null, function* () {\n      try {\n        let e = n.current;\n        if (I || e == null) return;\n        let i = yield e.getAddress(),\n            o = yield e.getSignature(),\n            t = Boolean(o),\n            r = {\n          address: i,\n          loginMethod: \"walletconnect\"\n        },\n            c = {\n          logoutRoute: v,\n          loginType: \"walletConnect\",\n          callbackRoute: w\n        };\n        t ? (a(L(c)), a(P(o))) : a(L(c)), a(H(r)), e.walletConnector.on(\"heartbeat\", () => {\n          clearInterval(m), m = setInterval(() => {\n            console.log(\"Maiar Wallet Connection Lost\"), f(), clearInterval(m);\n          }, 15e4);\n        }), R(w, O);\n      } catch (e) {\n        F(\"Invalid address\"), console.error(e);\n      }\n    });\n  }\n\n  function K() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !0;\n    return s(this, null, function* () {\n      var r, c;\n      let i = e && !u;\n      if (!p || ((c = (r = n == null ? void 0 : n.current) == null ? void 0 : r.isInitialized) == null ? void 0 : c.call(r)) && !i) return;\n      let o = {\n        onClientLogin: q,\n        onClientLogout: f\n      },\n          t = new X(p, o);\n      yield t.init(), M(t), n.current = t, e && U();\n    });\n  }\n\n  function U() {\n    return s(this, null, function* () {\n      var t;\n      if (!p) return;\n      let e = yield (t = n.current) == null ? void 0 : t.login();\n      if (!Boolean(e)) return;\n\n      if (!l) {\n        T(e);\n        return;\n      }\n\n      let o = `${e}&token=${l}`;\n      T(o), a(B({\n        loginToken: l\n      }));\n    });\n  }\n\n  let C = Boolean(y);\n  return [K, {\n    error: y,\n    loginFailed: C,\n    isLoading: N && !C,\n    isLoggedIn: I && !C\n  }, {\n    uriDeepLink: j,\n    walletConnectUri: u\n  }];\n},\n    me = Y;\n\nexport { Y as a, me as b };","map":{"version":3,"names":["a","h","G","c","E","d","b","x","D","A","L","e","B","f","P","R","H","M","s","g","S","useEffect","Q","useRef","V","useState","$","WalletConnectProvider","X","Y","callbackRoute","w","logoutRoute","v","token","l","redirectAfterLogin","O","z","y","F","u","T","provider","p","J","I","n","m","W","Boolean","N","j","encodeURIComponent","k","setInterval","clearInterval","U","current","o","t","walletConnector","connected","i","method","params","sendCustomMessage","r","console","error","q","getAddress","getSignature","address","loginMethod","loginType","on","log","K","isInitialized","call","onClientLogin","onClientLogout","init","login","loginToken","C","loginFailed","isLoading","isLoggedIn","uriDeepLink","walletConnectUri","me"],"sources":["/home/edi/Desktop/swap/client/node_modules/@elrondnetwork/dapp-core/__chunks__/chunk-UK3KZYBG.js"],"sourcesContent":["import{a as h}from\"./chunk-EXNBNIH3.js\";import{a as G}from\"./chunk-7JG4YRLS.js\";import{c as E,d}from\"./chunk-5WWDE5CH.js\";import{b as x}from\"./chunk-CIYEPAMQ.js\";import{c as D}from\"./chunk-7VRNE5H2.js\";import{c as b,d as A}from\"./chunk-W6LR3W2N.js\";import{c as L,e as B,f as P}from\"./chunk-EU6LW3Z6.js\";import{a as R}from\"./chunk-6O6BU23Y.js\";import{b as H}from\"./chunk-7YJZIEAA.js\";import{a as M}from\"./chunk-N5CEAHUR.js\";import{e as s,g as S}from\"./chunk-YMWLFVZR.js\";S();import{useEffect as Q,useRef as V,useState as $}from\"react\";import{WalletConnectProvider as X}from\"@elrondnetwork/erdjs-wallet-connect-provider\";var Y=({callbackRoute:w,logoutRoute:v,token:l,redirectAfterLogin:O=!1})=>{let a=E(),z=15e3,[y,F]=$(\"\"),[u,T]=$(\"\"),{provider:g}=G(),p=d(b),J=d(A),I=d(D),n=V(g),m,W=Boolean(u),N=!W,j=W?`${J}?wallet-connect=${encodeURIComponent(u)}`:null;Q(()=>{k();let e=setInterval(()=>{k()},z);return()=>clearInterval(e)},[g]),h(()=>{U()},[l]),h(()=>{n.current=g},[g]);let f=()=>{x(v)};function k(){return s(this,null,function*(){var o,t;if(!Boolean((t=(o=n.current)==null?void 0:o.walletConnector)==null?void 0:t.connected))return;let i={method:\"heartbeat\",params:{}};try{yield n.current.sendCustomMessage(i)}catch(r){console.error(\"Connection lost\",r),f()}})}function q(){return s(this,null,function*(){try{let e=n.current;if(I||e==null)return;let i=yield e.getAddress(),o=yield e.getSignature(),t=Boolean(o),r={address:i,loginMethod:\"walletconnect\"},c={logoutRoute:v,loginType:\"walletConnect\",callbackRoute:w};t?(a(L(c)),a(P(o))):a(L(c)),a(H(r)),e.walletConnector.on(\"heartbeat\",()=>{clearInterval(m),m=setInterval(()=>{console.log(\"Maiar Wallet Connection Lost\"),f(),clearInterval(m)},15e4)}),R(w,O)}catch(e){F(\"Invalid address\"),console.error(e)}})}function K(e=!0){return s(this,null,function*(){var r,c;let i=e&&!u;if(!p||((c=(r=n==null?void 0:n.current)==null?void 0:r.isInitialized)==null?void 0:c.call(r))&&!i)return;let o={onClientLogin:q,onClientLogout:f},t=new X(p,o);yield t.init(),M(t),n.current=t,e&&U()})}function U(){return s(this,null,function*(){var t;if(!p)return;let e=yield(t=n.current)==null?void 0:t.login();if(!Boolean(e))return;if(!l){T(e);return}let o=`${e}&token=${l}`;T(o),a(B({loginToken:l}))})}let C=Boolean(y);return[K,{error:y,loginFailed:C,isLoading:N&&!C,isLoggedIn:I&&!C},{uriDeepLink:j,walletConnectUri:u}]},me=Y;export{Y as a,me as b};\n//# sourceMappingURL=chunk-UK3KZYBG.js.map\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}