{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TransactionOnNetwork = void 0;\n\nconst transactionStatus_1 = require(\"./transactionStatus\");\n\nconst contractResults_1 = require(\"./contractResults\");\n\nconst primitives_1 = require(\"./primitives\");\n\nconst transactionCompletionStrategy_1 = require(\"./transactionCompletionStrategy\");\n\nconst transactionLogs_1 = require(\"./transactionLogs\");\n\nconst transactionReceipt_1 = require(\"./transactionReceipt\");\n\nclass TransactionOnNetwork {\n  constructor(init) {\n    this.isCompleted = false;\n    this.hash = \"\";\n    this.type = \"\";\n    this.nonce = 0;\n    this.round = 0;\n    this.epoch = 0;\n    this.value = \"\";\n    this.receiver = new primitives_1.Address(\"\");\n    this.sender = new primitives_1.Address(\"\");\n    this.gasLimit = 0;\n    this.gasPrice = 0;\n    this.data = Buffer.from([]);\n    this.signature = \"\";\n    this.status = transactionStatus_1.TransactionStatus.createUnknown();\n    this.timestamp = 0;\n    this.blockNonce = 0;\n    this.hyperblockNonce = 0;\n    this.hyperblockHash = \"\";\n    this.receipt = new transactionReceipt_1.TransactionReceipt();\n    this.contractResults = new contractResults_1.ContractResults([]);\n    this.logs = new transactionLogs_1.TransactionLogs();\n    Object.assign(this, init);\n  }\n\n  static fromProxyHttpResponse(txHash, response) {\n    let result = TransactionOnNetwork.fromHttpResponse(txHash, response);\n    result.contractResults = contractResults_1.ContractResults.fromProxyHttpResponse(response.smartContractResults || []);\n    result.isCompleted = new transactionCompletionStrategy_1.TransactionCompletionStrategyOnProxy().isCompleted(result); // TODO: uniformize transaction status.\n\n    return result;\n  }\n\n  static fromApiHttpResponse(txHash, response) {\n    let result = TransactionOnNetwork.fromHttpResponse(txHash, response);\n    result.contractResults = contractResults_1.ContractResults.fromApiHttpResponse(response.results || []);\n    result.isCompleted = new transactionCompletionStrategy_1.TransactionCompletionStrategyOnAPI().isCompleted(result); // TODO: uniformize transaction status.\n\n    return result;\n  }\n\n  static fromHttpResponse(txHash, response) {\n    let result = new TransactionOnNetwork();\n    result.hash = txHash;\n    result.type = response.type || \"\";\n    result.nonce = response.nonce || 0;\n    result.round = response.round;\n    result.epoch = response.epoch || 0;\n    result.value = (response.value || 0).toString();\n    result.sender = new primitives_1.Address(response.sender);\n    result.receiver = new primitives_1.Address(response.receiver);\n    result.gasPrice = response.gasPrice || 0;\n    result.gasLimit = response.gasLimit || 0;\n    result.data = Buffer.from(response.data || \"\", \"base64\");\n    result.status = new transactionStatus_1.TransactionStatus(response.status);\n    result.timestamp = response.timestamp || 0;\n    result.blockNonce = response.blockNonce || 0;\n    result.hyperblockNonce = response.hyperblockNonce || 0;\n    result.hyperblockHash = response.hyperblockHash || \"\";\n    result.receipt = transactionReceipt_1.TransactionReceipt.fromHttpResponse(response.receipt || {});\n    result.logs = transactionLogs_1.TransactionLogs.fromHttpResponse(response.logs || {});\n    return result;\n  }\n\n  getDateTime() {\n    return new Date(this.timestamp * 1000);\n  }\n\n}\n\nexports.TransactionOnNetwork = TransactionOnNetwork;","map":{"version":3,"mappings":"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","names":["TransactionOnNetwork","constructor","init","primitives_1","Buffer","from","transactionStatus_1","createUnknown","transactionReceipt_1","contractResults_1","transactionLogs_1","Object","assign","fromProxyHttpResponse","txHash","response","result","fromHttpResponse","contractResults","smartContractResults","isCompleted","transactionCompletionStrategy_1","fromApiHttpResponse","results","hash","type","nonce","round","epoch","value","toString","sender","receiver","gasPrice","gasLimit","data","status","timestamp","blockNonce","hyperblockNonce","hyperblockHash","receipt","logs","getDateTime","Date","exports"],"sourceRoot":"","sources":["../src/transactions.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}