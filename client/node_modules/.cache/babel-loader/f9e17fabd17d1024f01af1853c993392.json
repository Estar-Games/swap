{"ast":null,"code":"import { c as y, d as x } from \"./chunk-5WWDE5CH.js\";\nimport { c as d } from \"./chunk-7VRNE5H2.js\";\nimport { e as f } from \"./chunk-EU6LW3Z6.js\";\nimport { a as u } from \"./chunk-6O6BU23Y.js\";\nimport { b as m } from \"./chunk-7YJZIEAA.js\";\nimport { a as L } from \"./chunk-N5CEAHUR.js\";\nimport { a as c, e as l, g as p } from \"./chunk-YMWLFVZR.js\";\np();\nimport { useState as I } from \"react\";\nimport { ExtensionProvider as k } from \"@elrondnetwork/erdjs-extension-provider\";\n\nvar q = _ref => {\n  let {\n    callbackRoute: t,\n    token: n,\n    redirectAfterLogin: T = !1\n  } = _ref;\n  let [r, E] = I(\"\"),\n      [S, s] = I(!1),\n      w = x(d),\n      g = y();\n\n  function h() {\n    return l(this, null, function* () {\n      s(!0);\n      let o = k.getInstance();\n\n      try {\n        if (!(yield o.init())) {\n          console.warn(\"Something went wrong trying to redirect to wallet login..\");\n          return;\n        }\n\n        let U = encodeURIComponent(`${window.location.origin}${t}`),\n            v = c({\n          callbackUrl: U\n        }, n && {\n          token: n\n        });\n        yield o.login(v), L(o);\n        let {\n          signature: a,\n          address: P\n        } = o.account;\n        a && g(f({\n          loginToken: String(n),\n          signature: a\n        })), g(m({\n          address: P,\n          loginMethod: \"extension\"\n        })), u(t, T);\n      } catch (e) {\n        console.error(\"error loging in\", e), E(\"error logging in\" + e.message);\n      } finally {\n        s(!1);\n      }\n    });\n  }\n\n  let i = Boolean(r);\n  return [h, {\n    loginFailed: i,\n    error: r,\n    isLoading: S && !i,\n    isLoggedIn: w && !i\n  }];\n};\n\nexport { q as a };","map":{"version":3,"names":["c","y","d","x","e","f","a","u","b","m","L","l","g","p","useState","I","ExtensionProvider","k","q","callbackRoute","t","token","n","redirectAfterLogin","T","r","E","S","s","w","h","o","getInstance","init","console","warn","U","encodeURIComponent","window","location","origin","v","callbackUrl","login","signature","address","P","account","loginToken","String","loginMethod","error","message","i","Boolean","loginFailed","isLoading","isLoggedIn"],"sources":["/home/edi/Desktop/swap/client/node_modules/@elrondnetwork/dapp-core/__chunks__/chunk-E5MPXD72.js"],"sourcesContent":["import{c as y,d as x}from\"./chunk-5WWDE5CH.js\";import{c as d}from\"./chunk-7VRNE5H2.js\";import{e as f}from\"./chunk-EU6LW3Z6.js\";import{a as u}from\"./chunk-6O6BU23Y.js\";import{b as m}from\"./chunk-7YJZIEAA.js\";import{a as L}from\"./chunk-N5CEAHUR.js\";import{a as c,e as l,g as p}from\"./chunk-YMWLFVZR.js\";p();import{useState as I}from\"react\";import{ExtensionProvider as k}from\"@elrondnetwork/erdjs-extension-provider\";var q=({callbackRoute:t,token:n,redirectAfterLogin:T=!1})=>{let[r,E]=I(\"\"),[S,s]=I(!1),w=x(d),g=y();function h(){return l(this,null,function*(){s(!0);let o=k.getInstance();try{if(!(yield o.init())){console.warn(\"Something went wrong trying to redirect to wallet login..\");return}let U=encodeURIComponent(`${window.location.origin}${t}`),v=c({callbackUrl:U},n&&{token:n});yield o.login(v),L(o);let{signature:a,address:P}=o.account;a&&g(f({loginToken:String(n),signature:a})),g(m({address:P,loginMethod:\"extension\"})),u(t,T)}catch(e){console.error(\"error loging in\",e),E(\"error logging in\"+e.message)}finally{s(!1)}})}let i=Boolean(r);return[h,{loginFailed:i,error:r,isLoading:S&&!i,isLoggedIn:w&&!i}]};export{q as a};\n//# sourceMappingURL=chunk-E5MPXD72.js.map\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}