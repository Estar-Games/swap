{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.onPrimitiveTypeSelect = exports.onPrimitiveValueSelect = exports.onTypedValueSelect = exports.onTypeSelect = void 0;\n\nconst errors = __importStar(require(\"../../errors\"));\n\nconst address_1 = require(\"./address\");\n\nconst boolean_1 = require(\"./boolean\");\n\nconst bytes_1 = require(\"./bytes\");\n\nconst enum_1 = require(\"./enum\");\n\nconst generic_1 = require(\"./generic\");\n\nconst h256_1 = require(\"./h256\");\n\nconst numerical_1 = require(\"./numerical\");\n\nconst nothing_1 = require(\"./nothing\");\n\nconst struct_1 = require(\"./struct\");\n\nconst tokenIdentifier_1 = require(\"./tokenIdentifier\");\n\nconst tuple_1 = require(\"./tuple\");\n\nconst types_1 = require(\"./types\");\n\nconst genericArray_1 = require(\"./genericArray\");\n\nconst string_1 = require(\"./string\"); // TODO: Extend functionality or rename wrt. restricted / reduced functionality (not all types are handled: composite, variadic).\n\n\nfunction onTypeSelect(type, selectors) {\n  if (type.hasExactClass(generic_1.OptionType.ClassName)) {\n    return selectors.onOption();\n  }\n\n  if (type.hasExactClass(generic_1.ListType.ClassName)) {\n    return selectors.onList();\n  }\n\n  if (type.hasExactClass(genericArray_1.ArrayVecType.ClassName)) {\n    return selectors.onArray();\n  }\n\n  if (type.hasClassOrSuperclass(types_1.PrimitiveType.ClassName)) {\n    return selectors.onPrimitive();\n  }\n\n  if (type.hasExactClass(struct_1.StructType.ClassName)) {\n    return selectors.onStruct();\n  }\n\n  if (type.hasExactClass(tuple_1.TupleType.ClassName)) {\n    return selectors.onTuple();\n  }\n\n  if (type.hasExactClass(enum_1.EnumType.ClassName)) {\n    return selectors.onEnum();\n  }\n\n  if (selectors.onOther) {\n    return selectors.onOther();\n  }\n\n  throw new errors.ErrTypingSystem(`type isn't known: ${type}`);\n}\n\nexports.onTypeSelect = onTypeSelect;\n\nfunction onTypedValueSelect(value, selectors) {\n  if (value.hasClassOrSuperclass(types_1.PrimitiveValue.ClassName)) {\n    return selectors.onPrimitive();\n  }\n\n  if (value.hasExactClass(generic_1.OptionValue.ClassName)) {\n    return selectors.onOption();\n  }\n\n  if (value.hasExactClass(generic_1.List.ClassName)) {\n    return selectors.onList();\n  }\n\n  if (value.hasExactClass(genericArray_1.ArrayVec.ClassName)) {\n    return selectors.onArray();\n  }\n\n  if (value.hasExactClass(struct_1.Struct.ClassName)) {\n    return selectors.onStruct();\n  }\n\n  if (value.hasExactClass(tuple_1.Tuple.ClassName)) {\n    return selectors.onTuple();\n  }\n\n  if (value.hasExactClass(enum_1.EnumValue.ClassName)) {\n    return selectors.onEnum();\n  }\n\n  if (selectors.onOther) {\n    return selectors.onOther();\n  }\n\n  throw new errors.ErrTypingSystem(`value isn't typed: ${value}`);\n}\n\nexports.onTypedValueSelect = onTypedValueSelect;\n\nfunction onPrimitiveValueSelect(value, selectors) {\n  if (value.hasExactClass(boolean_1.BooleanValue.ClassName)) {\n    return selectors.onBoolean();\n  }\n\n  if (value.hasClassOrSuperclass(numerical_1.NumericalValue.ClassName)) {\n    return selectors.onNumerical();\n  }\n\n  if (value.hasExactClass(address_1.AddressValue.ClassName)) {\n    return selectors.onAddress();\n  }\n\n  if (value.hasExactClass(bytes_1.BytesValue.ClassName)) {\n    return selectors.onBytes();\n  }\n\n  if (value.hasExactClass(string_1.StringValue.ClassName)) {\n    return selectors.onString();\n  }\n\n  if (value.hasExactClass(h256_1.H256Value.ClassName)) {\n    return selectors.onH256();\n  }\n\n  if (value.hasExactClass(tokenIdentifier_1.TokenIdentifierValue.ClassName)) {\n    return selectors.onTypeIdentifier();\n  }\n\n  if (value.hasExactClass(nothing_1.NothingValue.ClassName)) {\n    return selectors.onNothing();\n  }\n\n  if (selectors.onOther) {\n    return selectors.onOther();\n  }\n\n  throw new errors.ErrTypingSystem(`value isn't a primitive: ${value.getType()}`);\n}\n\nexports.onPrimitiveValueSelect = onPrimitiveValueSelect;\n\nfunction onPrimitiveTypeSelect(type, selectors) {\n  if (type.hasExactClass(boolean_1.BooleanType.ClassName)) {\n    return selectors.onBoolean();\n  }\n\n  if (type.hasClassOrSuperclass(numerical_1.NumericalType.ClassName)) {\n    return selectors.onNumerical();\n  }\n\n  if (type.hasExactClass(address_1.AddressType.ClassName)) {\n    return selectors.onAddress();\n  }\n\n  if (type.hasExactClass(bytes_1.BytesType.ClassName)) {\n    return selectors.onBytes();\n  }\n\n  if (type.hasExactClass(string_1.StringType.ClassName)) {\n    return selectors.onString();\n  }\n\n  if (type.hasExactClass(h256_1.H256Type.ClassName)) {\n    return selectors.onH256();\n  }\n\n  if (type.hasExactClass(tokenIdentifier_1.TokenIdentifierType.ClassName)) {\n    return selectors.onTokenIndetifier();\n  }\n\n  if (type.hasExactClass(nothing_1.NothingType.ClassName)) {\n    return selectors.onNothing();\n  }\n\n  if (selectors.onOther) {\n    return selectors.onOther();\n  }\n\n  throw new errors.ErrTypingSystem(`type isn't a known primitive: ${type}`);\n}\n\nexports.onPrimitiveTypeSelect = onPrimitiveTypeSelect;","map":{"version":3,"mappings":"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","names":["onTypeSelect","type","selectors","hasExactClass","generic_1","ClassName","onOption","onList","genericArray_1","onArray","hasClassOrSuperclass","types_1","onPrimitive","struct_1","onStruct","tuple_1","onTuple","enum_1","onEnum","onOther","errors","ErrTypingSystem","exports","onTypedValueSelect","value","onPrimitiveValueSelect","boolean_1","onBoolean","numerical_1","onNumerical","address_1","onAddress","bytes_1","onBytes","string_1","onString","h256_1","onH256","tokenIdentifier_1","onTypeIdentifier","nothing_1","onNothing","getType","onPrimitiveTypeSelect","onTokenIndetifier"],"sourceRoot":"","sources":["../../../src/smartcontracts/typesystem/matchers.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}