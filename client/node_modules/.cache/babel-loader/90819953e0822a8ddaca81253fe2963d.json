{"ast":null,"code":"import { c as x, d as c } from \"./chunk-5WWDE5CH.js\";\nimport { a as R } from \"./chunk-NPX3K3L4.js\";\nimport { G as M, q as I } from \"./chunk-CIYEPAMQ.js\";\nimport { c as i, e as b } from \"./chunk-TRR6AJCY.js\";\nimport { b as w } from \"./chunk-LJMA6SHE.js\";\nimport { c as h } from \"./chunk-AXKBBYAP.js\";\nimport { b as y } from \"./chunk-SEXJSOIC.js\";\nimport { a as l, b as p, e as T, g } from \"./chunk-YMWLFVZR.js\";\ng();\nimport H, { useRef as N } from \"react\";\nimport { Address as U } from \"@elrondnetwork/erdjs\";\nimport { Signature as W } from \"@elrondnetwork/erdjs/out/signature\";\n\nvar q = _ref => {\n  let {\n    sendSignedTransactionsAsync: A = R\n  } = _ref;\n\n  let d = c(h),\n      n = c(M),\n      e = N(!1),\n      o = x(),\n      u = () => {\n    o(b()), e.current = !1;\n  };\n\n  function E() {\n    return T(this, null, function* () {\n      var m, S;\n      let P = Object.keys(n);\n\n      for (let s of P) {\n        let j = (S = (m = n == null ? void 0 : n[s]) == null ? void 0 : m.customTransactionInformation) == null ? void 0 : S.signWithoutSending;\n        if (!(!s || j)) try {\n          if (!(n[s].status === \"signed\" && !e.current)) continue;\n          let {\n            transactions: r\n          } = n[s];\n          if (!r) continue;\n          e.current = !0;\n          let k = r.map(t => {\n            let B = new U(t.sender),\n                f = y(t),\n                D = new W(t.signature);\n            return f.applySignature(D, B), f;\n          }),\n              C = yield A(k),\n              O = \"pending\",\n              v = r.map(t => C.includes(t.hash) ? p(l({}, t), {\n            status: O\n          }) : t);\n          o(w({\n            sessionId: s,\n            submittedMessage: \"submitted\"\n          })), o(i({\n            sessionId: s,\n            status: \"sent\",\n            transactions: v\n          })), u(), I(d.nonce + r.length), history.pushState({}, document.title, \"?\");\n        } catch (a) {\n          console.error(\"Unable to send transactions\", a), o(i({\n            sessionId: s,\n            status: \"fail\",\n            errorMessage: a.message\n          })), u();\n        } finally {\n          e.current = !1;\n        }\n      }\n    });\n  }\n\n  return H.useEffect(() => {\n    E();\n  }, [n, d]), null;\n},\n    an = q;\n\nexport { q as a, an as b };","map":{"version":3,"names":["c","x","d","a","R","G","M","q","I","i","e","b","w","h","y","l","p","T","g","H","useRef","N","Address","U","Signature","W","sendSignedTransactionsAsync","A","n","o","u","current","E","m","S","P","Object","keys","s","j","customTransactionInformation","signWithoutSending","status","transactions","r","k","map","t","B","sender","f","D","signature","applySignature","C","O","v","includes","hash","sessionId","submittedMessage","nonce","length","history","pushState","document","title","console","error","errorMessage","message","useEffect","an"],"sources":["/home/edi/Desktop/swap/client/node_modules/@elrondnetwork/dapp-core/__chunks__/chunk-CMSAVUPV.js"],"sourcesContent":["import{c as x,d as c}from\"./chunk-5WWDE5CH.js\";import{a as R}from\"./chunk-NPX3K3L4.js\";import{G as M,q as I}from\"./chunk-CIYEPAMQ.js\";import{c as i,e as b}from\"./chunk-TRR6AJCY.js\";import{b as w}from\"./chunk-LJMA6SHE.js\";import{c as h}from\"./chunk-AXKBBYAP.js\";import{b as y}from\"./chunk-SEXJSOIC.js\";import{a as l,b as p,e as T,g}from\"./chunk-YMWLFVZR.js\";g();import H,{useRef as N}from\"react\";import{Address as U}from\"@elrondnetwork/erdjs\";import{Signature as W}from\"@elrondnetwork/erdjs/out/signature\";var q=({sendSignedTransactionsAsync:A=R})=>{let d=c(h),n=c(M),e=N(!1),o=x(),u=()=>{o(b()),e.current=!1};function E(){return T(this,null,function*(){var m,S;let P=Object.keys(n);for(let s of P){let j=(S=(m=n==null?void 0:n[s])==null?void 0:m.customTransactionInformation)==null?void 0:S.signWithoutSending;if(!(!s||j))try{if(!(n[s].status===\"signed\"&&!e.current))continue;let{transactions:r}=n[s];if(!r)continue;e.current=!0;let k=r.map(t=>{let B=new U(t.sender),f=y(t),D=new W(t.signature);return f.applySignature(D,B),f}),C=yield A(k),O=\"pending\",v=r.map(t=>C.includes(t.hash)?p(l({},t),{status:O}):t);o(w({sessionId:s,submittedMessage:\"submitted\"})),o(i({sessionId:s,status:\"sent\",transactions:v})),u(),I(d.nonce+r.length),history.pushState({},document.title,\"?\")}catch(a){console.error(\"Unable to send transactions\",a),o(i({sessionId:s,status:\"fail\",errorMessage:a.message})),u()}finally{e.current=!1}}})}return H.useEffect(()=>{E()},[n,d]),null},an=q;export{q as a,an as b};\n//# sourceMappingURL=chunk-CMSAVUPV.js.map\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}