{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.StructBinaryCodec = void 0;\n\nconst typesystem_1 = require(\"../typesystem\");\n\nconst fields_1 = require(\"./fields\");\n\nclass StructBinaryCodec {\n  constructor(binaryCodec) {\n    this.fieldsCodec = new fields_1.FieldsBinaryCodec(binaryCodec);\n  }\n\n  decodeTopLevel(buffer, type) {\n    let [decoded] = this.decodeNested(buffer, type);\n    return decoded;\n  }\n\n  decodeNested(buffer, type) {\n    let fieldDefinitions = type.getFieldsDefinitions();\n    let [fields, offset] = this.fieldsCodec.decodeNested(buffer, fieldDefinitions);\n    let struct = new typesystem_1.Struct(type, fields);\n    return [struct, offset];\n  }\n\n  encodeNested(struct) {\n    let fields = struct.getFields();\n    let buffer = this.fieldsCodec.encodeNested(fields);\n    return buffer;\n  }\n\n  encodeTopLevel(struct) {\n    return this.encodeNested(struct);\n  }\n\n}\n\nexports.StructBinaryCodec = StructBinaryCodec;","map":{"version":3,"mappings":";;;;;;;AAAA;;AAEA;;AAEA,MAAaA,iBAAb,CAA8B;EAG1BC,YAAYC,WAAZ,EAAoC;IAChC,KAAKC,WAAL,GAAmB,IAAIC,0BAAJ,CAAsBF,WAAtB,CAAnB;EACH;;EAEDG,cAAc,CAACC,MAAD,EAAiBC,IAAjB,EAAiC;IAC3C,IAAI,CAACC,OAAD,IAAY,KAAKC,YAAL,CAAkBH,MAAlB,EAA0BC,IAA1B,CAAhB;IACA,OAAOC,OAAP;EACH;;EAEDC,YAAY,CAACH,MAAD,EAAiBC,IAAjB,EAAiC;IACzC,IAAIG,gBAAgB,GAAGH,IAAI,CAACI,oBAAL,EAAvB;IACA,IAAI,CAACC,MAAD,EAASC,MAAT,IAAsC,KAAKV,WAAL,CAAiBM,YAAjB,CAA8BH,MAA9B,EAAsCI,gBAAtC,CAA1C;IACA,IAAII,MAAM,GAAG,IAAIC,mBAAJ,CAAWR,IAAX,EAAiBK,MAAjB,CAAb;IACA,OAAO,CAACE,MAAD,EAASD,MAAT,CAAP;EACH;;EAEDG,YAAY,CAACF,MAAD,EAAe;IACvB,IAAIF,MAAM,GAAGE,MAAM,CAACG,SAAP,EAAb;IACA,IAAIX,MAAM,GAAG,KAAKH,WAAL,CAAiBa,YAAjB,CAA8BJ,MAA9B,CAAb;IACA,OAAON,MAAP;EACH;;EAEDY,cAAc,CAACJ,MAAD,EAAe;IACzB,OAAO,KAAKE,YAAL,CAAkBF,MAAlB,CAAP;EACH;;AA3ByB;;AAA9BK","names":["StructBinaryCodec","constructor","binaryCodec","fieldsCodec","fields_1","decodeTopLevel","buffer","type","decoded","decodeNested","fieldDefinitions","getFieldsDefinitions","fields","offset","struct","typesystem_1","encodeNested","getFields","encodeTopLevel","exports"],"sourceRoot":"","sources":["../../../src/smartcontracts/codec/struct.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}